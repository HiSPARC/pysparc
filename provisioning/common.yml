---
- name: Make sure hisparc user is in adm and plugdev groups
  user: name=hisparc groups=adm,sudo,plugdev append=yes
  sudo: yes

- name: Update package index
  apt: update_cache=yes
  sudo: yes

- name: Install screen
  apt: name=screen state=present
  sudo: yes

- name: Install ipython
  apt: name=ipython state=present
  sudo: yes

- name: Allow access to FTDI devices
  copy: src=99-libftdi.rules dest=/etc/udev/rules.d/99-libftdi.rules
  sudo: yes

- name: Install ACL utilities
  apt: name=acl state=present
  sudo: yes

- name: Install git
  apt: name=git state=present
  sudo: yes

- name: Install supervisor
  apt: name=supervisor state=present
  sudo: yes

- name: Configure supervisor
  copy: src=supervisord.conf dest=/etc/supervisor/supervisord.conf
  sudo: yes
  register: supervisorconfig

- name: Restart supervisor
  service: name=supervisor state=restarted
  sudo: yes
  when: supervisorconfig|changed
